package status;

import init.ButtonBuilder;
import init.DataBase;
import init.SendAnswer;
import org.telegram.telegrambots.meta.api.methods.send.SendMessage;
import java.util.Arrays;
import java.util.List;

public class MenuCondition implements Condition {
    DataBase dataBase = new DataBase();
    SendMessage message = new SendMessage();
    SendAnswer answer = new SendAnswer();
    @Override
    public Condition getNextCondition(String lastStatus, String command) {
        if(command.equals(getNameOfCondition(command))){
            return null;
        }
        else{return new GameFirstPartOrContinue();}
    }

    @Override
    public void sendMessage(String chatId, String command) {
        dataBase.open();
        if(!dataBase.getClass(chatId).equals("")) {
            mainMenu(chatId);
            message.setText("–ü–µ—Ä–µ—Ö–æ–¥ –≤ –º–µ–Ω—é –∏–≥—Ä—ã");
            answer.sendMsg(chatId, message);
        }
        dataBase.close();
    }

    @Override
    public void changeDate(String chatId, String command) {

    }

    @Override
    public String getNameOfCondition(String command) {
        return "–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é";
    }

    @Override
    public void mainMenu(String chatId) {
        List<String> mainMenu = Arrays.asList("–ó–¥–æ—Ä–æ–≤—å–µ " + dataBase.getHealth(chatId) +
                        "‚ù§", "–ú–∞–Ω–∞ " + dataBase.getMana(chatId) + "üåä",
                "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", "–¢–µ—Å—Ç —É—Ä–æ–Ω–∞ (60)", "–ù–∞—á–∞—Ç—å/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É",
                "–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å", "–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å");
        ButtonBuilder Buttons = new ButtonBuilder();
        Buttons.createHeroBut(message, mainMenu);
    }
}
